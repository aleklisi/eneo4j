<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>The eneo4j application
</title>
<link rel="stylesheet" type="text/css" href="stylesheet.css" title="EDoc">
</head>
<body bgcolor="white">
<div class="navbar"><a name="#navbar_top"></a><table width="100%" border="0" cellspacing="0" cellpadding="2" summary="navigation bar"><tr><td><a href="overview-summary.html" target="overviewFrame">Overview</a></td><td><a href="http://www.erlang.org/"><img src="erlang.png" align="right" border="0" alt="erlang logo"></a></td></tr></table></div>
<h1>The eneo4j application
</h1>


<h4><a name="Installation">Installation</a></h4>

<p>To <code>rebar.config</code> add:</p>

<pre>   erlang
{deps, [
    ....
    {eneo4j, ".*", {git, "git://github.com/spawnfest/eneo4j.git", {branch, "master"}}}
]}.</pre>

<h4><a name="Configuration">Configuration</a></h4>

<p>There are 2 parameters to be configured:</p>

 <p>- database connection object 
- number of workers in a connection pool</p>

 <p>To configure the eneo4j connection just put those 2 parameters in persistent term storage.</p>

<p>In <code>your_project_app.erl</code> in <code>start/2</code> just put:</p>

<pre>   erlang
start(_StartType, _StartArgs) -&gt;
    ...
    Eneo4jWorkerConfig = #{
        url =&gt; "http://localhost:7474",
        db =&gt; "neo4j",
        user =&gt; "neo4j",
        password =&gt; "test"
    },
    persistent_term:put(eneo4j_worker_config, Eneo4jWorkerConfig),
    persistent_term:put(eneo4j_workers_count, 5),
    {ok, _} = application:ensure_all_started(eneo4j),
    ...</pre>

<p>You may alternatively put this code under a separate supervisor's init.</p>

<p>Do not include <code>user</code> and <code>password</code> if your neo4j does not have a password configured.</p>


<h4><a name="Use">Use</a></h4>

<p>To build and execute a transaction write your query, provide params for it and commit it to the database:</p>

<pre>% Write your query using cypher:
Query = &lt;&lt;"CREATE (n:Person { name: $name, title: $title });"&gt;&gt;,

% Provide params if needed:
ParamsAndy = #{
  &lt;&lt;"name"&gt;&gt; =&gt; &lt;&lt;"Andy"&gt;&gt;,
  &lt;&lt;"title"&gt;&gt; =&gt; &lt;&lt;"Developer"&gt;&gt;
  },

% Build a statement:
Statement = eneo4j:build_statement(Query, ParamsAndy),

% Lets execute those queries:
eneo4j:begin_and_commit_transaction([Statement]).</pre>

<hr>
<div class="navbar"><a name="#navbar_bottom"></a><table width="100%" border="0" cellspacing="0" cellpadding="2" summary="navigation bar"><tr><td><a href="overview-summary.html" target="overviewFrame">Overview</a></td><td><a href="http://www.erlang.org/"><img src="erlang.png" align="right" border="0" alt="erlang logo"></a></td></tr></table></div>
<p><i>Generated by EDoc</i></p>
</body>
</html>
